<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
  <style>

    .table-container .table th {
      background: #aad9ff;
    }
    .table-container .table td {
      width: 6rem;
    }
    td span {
      
    }

    .table-container .table {
      position: relative;
      display: inline-block;
    }

    .table-container .table tr th:first-child {
      position: sticky;
      left: 0;
      /* 必要に応じて変更 */
      z-index: 1;
    }
  </style>
  <script>
    window.addEventListener('DOMContentLoaded', (event) => {
      const tableContainer = document.getElementById('tableContainer');
      const table = document.getElementById('myTable');

      tableContainer.addEventListener('scroll', function () {
        let scrollLeft = tableContainer.scrollLeft + 150;
        let row = document.getElementById("trid")

        let ce = null
        let cells = row.getElementsByTagName('td');
        for (let j = 0; j < cells.length; j++) {
          let cell = cells[j];
          let offsetLeft = cell.offsetLeft;
          let offsetWidth = cell.offsetWidth;
          cell.querySelector("span").style.marginLeft = "0px"
          if (offsetLeft <= scrollLeft && offsetLeft + offsetWidth > scrollLeft) {
            ce = cell
            console.log(j)
            //break;
          }
        }

        if (ce) {
          let sp = ce.querySelector("span")
          console.log(sp.offsetWidth);
          if (scrollLeft - ce.offsetLeft + sp.offsetWidth < ce.offsetWidth) {
            let cal  = scrollLeft - ce.offsetLeft
            ce.querySelector("span").style.marginLeft = `calc(${cal}px - 0.75rem)`
          }
            
        }


      });
    });
  </script>
</head>

<body>
  <div id="tableContainer" class="table-container" style="overflow-x: auto;">
    <table id="myTable" class="table" style="width:3000px">
      <tr>
        <th colspan="1" style="width: 150px;"></th>
        <th colspan="1">8/1</th>
        <th colspan="1">8/2</th>
        <th colspan="1">8/3</th>
        <th colspan="1">8/4</th>
        <th colspan="1">8/5</th>
        <th colspan="1">8/6</th>
        <th colspan="1">8/7</th>
        <th colspan="1">8/8</th>
        <th colspan="1">8/9</th>
        <th colspan="1">8/10</th>
        <th colspan="1">8/11</th>
        <th colspan="1">8/12</th>
        <th colspan="1">8/13</th>
        <th colspan="1">8/14</th>
        <th colspan="1">8/15</th>
        <th colspan="1">8/16</th>
        <th colspan="1">8/17</th>
        <th colspan="1">8/18</th>
        <th colspan="1">8/19</th>
        <th colspan="1">8/20</th>
        <th colspan="1">8/21</th>
        <th colspan="1">8/22</th>
        <th colspan="1">8/23</th>
        <th colspan="1">8/24</th>
        <th colspan="1">8/25</th>
        <th colspan="1">8/26</th>
        <th colspan="1">8/27</th>
        <th colspan="1">8/28</th>
        <th colspan="1">8/29</th>
        <th colspan="1">8/30</th>
        <th colspan="1">8/31</th>
      </tr>
      <!-- 具体的な行のデータ -->
      <tr id="trid">
        <th >適正在庫</th>
        <td colspan="5"><span>1000</span></td>
        <td colspan="5"><span>1100</span></td>
        <td colspan="5"><span>1200</span></td>
        <td colspan="5"><span>1300</span></td>
        <td colspan="5"><span>1400</span></td>
        <td colspan="6"><span>1500</span></td>
      </tr>
      <tr>
        <th >自動立案数</th>
        <td>100</td>
        <td>100</td>
        <td>100</td>
        <td>100</td>
        <td>100</td>
        <td>100</td>
        <td>100</td>
        <td>100</td>
        <td>100</td>
        <td>100</td>
        <td>100</td>
        <td>100</td>
        <td>100</td>
        <td>100</td>
        <td>100</td>
        <td>100</td>
        <td>100</td>
        <td>100</td>
        <td>100</td>
        <td>100</td>
        <td>100</td>
        <td>100</td>
        <td>100</td>
        <td>100</td>
        <td>100</td>
        <td>100</td>
        <td>100</td>
        <td>100</td>
        <td>100</td>
        <td>100</td>
        <td>100</td>
      </tr>
    </table>
  </div>
</body>

</html>